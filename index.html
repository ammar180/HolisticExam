<!DOCTYPE html>
<html lang="en">

<head>
    <title>Simple Quiz</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container">
        <form onsubmit="return calcResult(this)">
            <label for="userName">User Name</label>
            <input type="text" name="userName" id="userName">
            <label for="">Q1: What is HTML stand for?</label>
            <ul>
                <li><input type="radio" name="q1" id="q1-1" value=1><label for="q1-1">Hyper Text Marcup Language</label></li>
                <li><input type="radio" name="q1" id="q1-2" value=2><label for="q1-2">Hero Text Marcup Language</label></li>
                <li><input type="radio" name="q1" id="q1-3" value=3><label for="q1-3">Hyper Text Moroco Language</label></li>
                <li><input type="radio" name="q1" id="q1-4" value=4><label for="q1-4">Hyper Table Mongo Learning</label></li>
            </ul>

            <label for="">Q2: What is the perpos of using CSS in the web pages?</label>
            <ul>
                <li><input type="radio" name="q2" id="q2-1" value=1><label for="q2-1">To Make Web page Components.</label></li>
                <li><input type="radio" name="q2" id="q2-2" value=2><label for="q2-2">To add Some loginc and Interaction to Web pages.</label></li>
                <li><input type="radio" name="q2" id="q2-3" value=3><label for="q2-3">For Styling the Html And add animation.</label></li>
                <li><input type="radio" name="q2" id="q2-4" value=4><label for="q2-4">To make handle Animation Server-site.</label></li>
            </ul>

            <label for="">Q3: What is the perpos of using JavaScript in the web pages?</label>
            <ul>
                <li><input type="radio" name="q3" id="q3-1" value=1><label for="q3-1">To Make Web page Components.</label></li>
                <li><input type="radio" name="q3" id="q3-2" value=2><label for="q3-2">For Styling the Html And add animation.</label></li>
                <li><input type="radio" name="q3" id="q3-3" value=3><label for="q3-3">To Store Data.</label></li>
                <li><input type="radio" name="q3" id="q3-4" value=4><label for="q3-4">To add Some loginc and Interaction to Web pages.</label></li>
            </ul>

            <input type="submit"class="btn" value="Submit">
        </form>
        <div style="margin-top: 10px;">The User '<span id="User">_</span>' Gets Score: 3 / <span id="CountResult">_</span></div>
    </div>

    <script src="script.js"></script>
    <script type="importmap">
      {
        "imports": {
          "@google/generative-ai": "https://esm.run/@google/generative-ai"
        }
      }
    </script>
  <script type="module">
    import { GoogleGenerativeAI } from "@google/generative-ai";

    const API_KEY = "AIzaSyB_enJuHRK9vanW8g7SFwrdYaxJWrIy3Y0";

    const genAI = new GoogleGenerativeAI(API_KEY);

    const model = genAI.getGenerativeModel({ model: "gemini-1.5-flash" });

    window.addEventListener('message', async (event) => {
      console.log(event);
      let messageObject = JSON.parse(event.data);
      const ans = messageObject.ans;
      const qus = messageObject.qus;
      const req =
        `
            - ان يكون الموضوع متعلق  بالفكرة المطروحة (5 نقاط)
            - ان يكون  ليس به اي خطأ املائي او نحوي (3 نقاط)
            - ان يكون اسلوب السرد منسق(2 نقاط) 
            - يحتوى الموضوع على استشهادات بأبيات شعر او قران كريم او احاديث شريفه(4 نقاط)
            - ان لا يقل عن 10 سطور و لا يزين عن 15 سطر(1 نقاط)
            `;
      const prompt =
        `
            قام الطالب بكتابة هذه الاجابة ${ans}
            لموضوع التعبير هذا ${qus}،
            ستقوم بارجاع شيئين منفصلان عن بعضهما بهذا الحرف "|" مرة واحده،
            الشيء الاول هو نبذه عن التقيم العام للاجابة(لاتزيد عن سطرين) باستخدام هذه المعاير:${req}،
            الشيء الثاني هو الدرجة التي حصل عليها الطالب في صيغة الدرجة / 15.

            Note: don't add * or #
            `;

      const result = await model.generateContent(prompt);
      const response = await result.response;
      const text = response.text();
      console.log(text);
      return text;
    });
  </script>
</body>

</html>
